C51 COMPILER V9.54   4                                                                     11/16/2019 15:50:38 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE 4
OBJECT MODULE PLACED IN 4.OBJ
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE 4.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include<reg52.h>              //including sfr registers for ports of the controller
   2          #include <stdlib.h>
   3          #include <string.h>
   4          
   5          
   6          
   7          extern bit RS;                                                                   
   8          extern bit EN;                           
   9          extern bit D0;
  10          extern bit D1;
  11          extern bit D2;
  12          extern bit D3;
  13          extern bit D4;
  14          extern bit D5;
  15          extern bit D6;
  16          extern bit D7;
  17          //End LCD Module Connections 
  18          
  19          void Lcd_Delay(int a)
  20          {
  21   1          int j;
  22   1          int i;
  23   1          for(i=0;i<a;i++)
  24   1          {
  25   2              for(j=0;j<100;j++)
  26   2              {
  27   3              }
  28   2          }
  29   1      }
  30          
  31          //LCD 8 Bit Interfacing Functions
  32          void Lcd8_Port(char a)
  33          {
  34   1        if(a & 1)
  35   1          D0 = 1;
  36   1        else 
  37   1          D0 = 0;
  38   1        
  39   1        if(a & 2)
  40   1          D1 = 1;
  41   1        else
  42   1          D1 = 0;
  43   1        
  44   1        if(a & 4)
  45   1          D2 = 1;
  46   1        else
  47   1          D2 = 0;
  48   1        
  49   1        if(a & 8)
  50   1          D3 = 1;
  51   1        else
  52   1          D3 = 0;
  53   1        
  54   1        if(a & 16)
  55   1          D4 = 1;
C51 COMPILER V9.54   4                                                                     11/16/2019 15:50:38 PAGE 2   

  56   1        else
  57   1          D4 = 0;
  58   1      
  59   1        if(a & 32)
  60   1          D5 = 1;
  61   1        else
  62   1          D5 = 0;
  63   1        
  64   1        if(a & 64)
  65   1          D6 = 1;
  66   1        else 
  67   1          D6 = 0;
  68   1        
  69   1        if(a & 128)
  70   1          D7 = 1;
  71   1        else
  72   1          D7 = 0;
  73   1      }
  74          void Lcd8_Cmd(char a)
  75          { 
  76   1        RS = 0;             // => RS = 0
  77   1        Lcd8_Port(a);             //Data transfer
  78   1        EN  = 1;             // => E = 1
  79   1        Lcd_Delay(5);
  80   1        EN  = 0;             // => E = 0
  81   1      }
  82          
  83          Lcd8_Clear()
  84          {
  85   1          Lcd8_Cmd(1);
  86   1      }
  87          
  88          void Lcd8_Set_Cursor(char a, char b)
  89          {
  90   1        if(a == 1)
  91   1          Lcd8_Cmd(0x80 + b);
  92   1        else if(a == 2)
  93   1          Lcd8_Cmd(0xC0 + b);
  94   1      }
  95          
  96          void Lcd8_Init()
  97          {
  98   1        Lcd8_Port(0x00);
  99   1        RS = 0;
 100   1        Lcd_Delay(200);
 101   1        ///////////// Reset process from datasheet /////////
 102   1        Lcd8_Cmd(0x30);
 103   1        Lcd_Delay(50);
 104   1        Lcd8_Cmd(0x30);
 105   1        Lcd_Delay(110);
 106   1        Lcd8_Cmd(0x30);
 107   1        /////////////////////////////////////////////////////
 108   1        Lcd8_Cmd(0x38);    //function set
 109   1        Lcd8_Cmd(0x0C);    //display on,cursor off,blink off
 110   1        Lcd8_Cmd(0x01);    //clear display
 111   1        Lcd8_Cmd(0x06);    //entry mode, set increment
 112   1      }
 113          
 114          void Lcd8_Write_Char(char a)
 115          {
 116   1         RS = 1;             // => RS = 1
 117   1         Lcd8_Port(a);             //Data transfer
C51 COMPILER V9.54   4                                                                     11/16/2019 15:50:38 PAGE 3   

 118   1         EN  = 1;             // => E = 1
 119   1         Lcd_Delay(5);
 120   1         EN  = 0;             // => E = 04
 121   1      }
 122          
 123          void Lcd8_Write_String(char *a)
 124          {
 125   1        int i;
 126   1        for(i=0;a[i]!='\0';i++)
 127   1         Lcd8_Write_Char(a[i]);
 128   1      }
 129          
 130          void Lcd8_Shift_Right()
 131          {
 132   1        Lcd8_Cmd(0x1C);
 133   1      }
 134          
 135          void Lcd8_Shift_Left()
 136          {
 137   1        Lcd8_Cmd(0x18);
 138   1      }
 139          
 140          
 141          //LCD Module Connections
 142          sbit RS = P0^0;                                                                   
 143          sbit EN = P0^1;                            
 144          sbit D0 = P2^0;
 145          sbit D1 = P2^1;
 146          sbit D2 = P2^2;
 147          sbit D3 = P2^3;
 148          sbit D4 = P2^4;
 149          sbit D5 = P2^5;
 150          sbit D6 = P2^6;
 151          sbit D7 = P2^7;
 152          //End LCD Module Connections
 153          
 154          
 155          sbit sw1 = P1^0;
 156          sbit sw2 = P1^1;
 157          sbit sw3 = P1^2;
 158          
 159          void Delay(int a)
 160          {
 161   1          int j;
 162   1          int i;
 163   1          for(i=0;i<a;i++)
 164   1          {
 165   2              for(j=0;j<100;j++)
 166   2              {
 167   3              }
 168   2          }
 169   1      }
 170          
 171          
 172          
 173          
 174          int state = 0;
 175          char c;
 176          void main()
 177          {  
 178   1        int i;
 179   1        int j;
C51 COMPILER V9.54   4                                                                     11/16/2019 15:50:38 PAGE 4   

 180   1        int mode;
 181   1        int flag;
 182   1        int att1;
 183   1        int att2;
 184   1        int att3;
 185   1        int attendance[5][6];
 186   1        int attendedClasses[5];
 187   1        char num[2];
 188   1        char xdata str[5];
 189   1      
 190   1        Lcd8_init();    
*** WARNING C206 IN LINE 190 OF 4.c: 'Lcd8_init': missing function-prototype
 191   1        sw1 =1;
 192   1        sw2=1;
 193   1        sw3=1;
 194   1        i = 1;
 195   1        flag = 1;
 196   1        
 197   1      
 198   1        for(j=0;j<6;j++){ 
 199   2        for(i=0;i<5;i++){
 200   3        do{   
 201   4          
 202   4        /*int num1 = i%10;
 203   4        int num2 = (i/10)%10;*/
 204   4            
 205   4        flag = 0; 
 206   4        Lcd8_Set_Cursor(1,2);
 207   4        Lcd8_Write_String("Day ");
 208   4        Lcd8_Write_Char((j+1)+'0');
 209   4        Lcd8_Write_String(" Roll ");
 210   4        Lcd8_Write_Char((i+1)+'0');
 211   4        //Lcd8_Write_Char(num1+'0');  
 212   4        Lcd8_Set_Cursor(2,0);   
 213   4        Lcd8_Write_String("present");
 214   4        Lcd8_Set_Cursor(2,10);    
 215   4        Lcd8_Write_String("absent");
 216   4        
 217   4        if(sw1==0){
 218   5          attendance[i][j]=1;
 219   5          break;
 220   5        } 
 221   4        else if(sw3==0){
 222   5          attendance[i][j]=0;
 223   5          break;
 224   5        }     
 225   4        
 226   4        if(i==21){
 227   5         Lcd8_Clear();
 228   5        break;
 229   5        }
 230   4      
 231   4        flag=1; 
 232   4      
 233   4        }while(flag == 1);
 234   3       }
 235   2        }
 236   1        
 237   1        Lcd8_Clear();
 238   1        Lcd8_Set_Cursor(1,1);
 239   1        Lcd8_Write_String("Calculating");
 240   1        Delay(5000);
C51 COMPILER V9.54   4                                                                     11/16/2019 15:50:38 PAGE 5   

 241   1        
 242   1        for(j=0;j<5;j++){ 
 243   2          attendedClasses[j]=0;
 244   2        }
 245   1        
 246   1        for(j=0;j<5;j++){
 247   2          for(i=0;i<6;i++){
 248   3            if(attendance[j][i]==1){
 249   4                attendedClasses[j]++;
 250   4            }
 251   3          }
 252   2        }
 253   1        
 254   1        
 255   1        Lcd8_Clear();
 256   1        for(i=0;i<5;i++){
 257   2         // attendedClasses[i] = (attendedClasses[i]/6)*100;
 258   2         
 259   2          /*att1 = attendedClasses[i]%10;
 260   2          att2 = (attendedClasses[i]/10)%10;
 261   2          att3 = (attendedClasses[i]/100)%10;*/
 262   2          //sprintf(str,"%4.1",attendedClasses[i]); 
 263   2          
 264   2          Lcd8_Set_Cursor(1,0);
 265   2          Lcd8_Write_String("Atn of stdnt ");
 266   2          Lcd8_Write_Char((i+1)+'0');
 267   2          Lcd8_Set_Cursor(2,0);
 268   2          Lcd8_Write_Char(attendedClasses[i]+'0');
 269   2          Lcd8_Write_String("/6");
 270   2          
 271   2          /*Lcd8_Write_Char(att3+'0');
 272   2          Lcd8_Write_Char(att2+'0');
 273   2          Lcd8_Write_Char(att1+'0');*/
 274   2          //Lcd8_Write_String(str);
 275   2          //Lcd8_Write_Char('%');
 276   2          Delay(5000);
 277   2        }
 278   1        
 279   1        Lcd8_Clear();
 280   1        Lcd8_Set_Cursor(1,0);
 281   1        Lcd8_Write_String("With shortage");
 282   1        Lcd8_Set_Cursor(2,1);
 283   1        for(i=0;i<5;i++){
 284   2          if(attendedClasses[i]<5){
 285   3            Lcd8_Write_Char((i+1)+'0');
 286   3            if(i<4)
 287   3              Lcd8_Write_String(",");     
 288   3          }
 289   2        }
 290   1        Delay(10000);
 291   1        
 292   1      
 293   1          
 294   1        
 295   1       
 296   1        
 297   1        
 298   1        }
*** WARNING C280 IN LINE 180 OF 4.c: 'mode': unreferenced local variable
*** WARNING C280 IN LINE 182 OF 4.c: 'att1': unreferenced local variable
*** WARNING C280 IN LINE 183 OF 4.c: 'att2': unreferenced local variable
*** WARNING C280 IN LINE 184 OF 4.c: 'att3': unreferenced local variable
C51 COMPILER V9.54   4                                                                     11/16/2019 15:50:38 PAGE 6   

*** WARNING C280 IN LINE 187 OF 4.c: 'num': unreferenced local variable
*** WARNING C280 IN LINE 188 OF 4.c: 'str': unreferenced local variable
 299              
 300              
 301          
 302            
 303          
 304          
 305          
 306          
*** WARNING C290 IN LINE 86 OF 4.c: missing return value


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    866    ----
   CONSTANT SIZE    =     72    ----
   XDATA SIZE       =   ----       5
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3      92
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  8 WARNING(S),  0 ERROR(S)
